#include <sys/stat.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <time.h>
#include <fcntl.h>
#include <signal.h>
#include "hacking.h"
#include "hacking_network.h"

#define PORT 80
#define WEBROOT "./webroot" /* The webserver root directory */
#define LOGFILE "/var/log/tinywebd.log" /* Log filename */

int logfd, sockfd /* Global log and Socket file descriptors */
void handle_connection(int, struct sockaddr_in *, int);
int get_file_size(int); /* Returns the file size of the open file descriptor */
void timestamp(int); /* Write timesstamp to open the file descriptor */

/* This function will be called when the process is killed */
void handle_shutdown(int signal){
    timestamp(logfd);
    write(logfd, "Shutting down.\n", 16);
    close(logfd);
    close(sockfd);
    exit(0);
}

int main(void){
    int new_sockfd, yes=1;
    struct sockaddr_in host_addr, client_addr; /* My address information */
    socklen_t sin_size;
}