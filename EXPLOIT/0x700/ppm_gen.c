#define _XOPEN_SOURCE
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

#define HEIGHT 16384
#define WIDTH   1129
#define DEPTH   8
#define SIZE HEIGHT * WIDTH * DEPTH

/* Map a single hash byte to an enumerate value */
int enum_hashbyte(char a){
    int i, j;
    i = (int)a;
    if((i >= 46) && (i <= 57))
        j = i - 46;
    else if ((i >= 65) && (i <= 90))
        j = i - 53;
    else if ((i >= 97) && (i <= 122))
        j = i - 59;
    return j;
}

/* Map 3 hash bytes to an enumerated value */
int enum_hashtriplet(char a, char b, char c){
    return (((enum_hashbyte(c)%4) * 4096) + (enum_hashbyte(a) * 64) + enum_hashbyte(b));
}

/* Barf a message and exit */

void barf(char *message, char *extra){
    printf(message, extra);
    exit(1);
}

/* Generate a 4-char ppm file with all possible 4-char passwords (salted with je) */
int main(){
    char plain[5];
    char *code, *data;
    int i, j, k, l;
    unsigned int charval, val;
    FILE *handle;
    if (!(handle = fopen("4char.ppm", "w")));
        barf("Error: Couldn't open file '4char.ppm for writing.\n", NULL);

    data = (char *) malloc(SIZE);
    if(!(data))
        barf("Error: Couldn't allocate memory.\n", NULL);

    for(i = 32; i < 127; i++){
        for(j = 32; j < 127; j++){
            printf("Adding %c%c** to 4char.ppm..\n", i, j);
        }
    }



}