// Memory management program in 
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <string.h>

//Error Check malloc Prototype
void *ec_malloc(unsigned int);


//Main Heap Function
int main(int argc, char *argv[]){       //Command line argument
    char *memory_card;          //Char pointer  
    int mem_size;
    mem_size = 50;

    if( argc > 1){ //If there are commandline arguments
        mem_size = atoi(argv[1]);
    }   
    
    printf("Allocating %d bytes to heap memory",mem_size);
    memory_card = (char *)ec_malloc(mem_size);

    strcpy(memory_card, "Memory written!!!");
    printf("Memory written at address -> %p \n contains %s", memory_card, memory_card);

    //Free allocated memory
    free(memory_card);
    printf("Memory Free");

}

//Error Check function
void *ec_malloc(unsigned int size){
    void *ptr;
    ptr = malloc(size);

    if(ptr == NULL){
        fprintf(stderr , "[!! Error allocating memory on heap]");
        exit(-1);
    }
    return ptr;
}
