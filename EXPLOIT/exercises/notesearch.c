#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/stat.h>
#include "hacking.h"

#define FILENAME "/var/notes"

int print_notes(int, int, char *);      //Note printing function
int find_user_note(int, int);           //Seek in file fora not for user
int search_note(char *, char *);        //Serch for keyword function
void fatal(char *);                      //Fatal error handler


int main(int argc, char *argv[]){
    int userid;
    int printing = 1;
    int fd;         //File descriptor
    char searchstring[100];

    if(argc > 1)                             //if there are command-line arguments
        strcpy(searchstring, argv[1]);       //That is the search string
    else
        searchstring[0] = 0;                 // search string is empty

    userid = getuid();

    fd = open(FILENAME ,O_RDONLY);          //Open file for read only access
    if(fd == -1)
        fatal("in main() while opening file for reading");
        
    while (printing)
    {
        printing = print_notes(fd,userid, searchstring);
    printf("---------[ end of note data ]------------\n")

    close(fd);
    }

    //A function to print the note for a given uid that match
    //an optional search string
    //returns 0 at the end of the file, 1 if there are still more notes

    int print_notes(int fd, int uid, char *searchstring){
        int note_length;
        char byte = 0;
        char note_buffer[100];

        note_length = find_user_note(fd, uid);
        if(note_length == -1)                   //If the end of the file is reach
            return 0;
            
            
    }
    








}
    